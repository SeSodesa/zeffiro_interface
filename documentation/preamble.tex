%%% Needed packages

\usepackage{mathtools}
\usepackage[english]{babel}
\usepackage{hyperref}
\usepackage{xparse}
\usepackage{tabularx}
\usepackage{siunitx}

%%% Font settings.

\usepackage{fourier}

\usepackage{fontspec}

\setmainfont[
	Path           = ./fonts/,
	Extension      = .otf,
	Ligatures      = TeX,
	BoldFont       = Erewhon-Bold,
	ItalicFont     = Erewhon-Italic,
	BoldItalicFont = Erewhon-BoldItalic,
]{Erewhon-Regular}

\setmonofont[
	Path           = ./fonts/,
	Extension      = .ttf,
	Ligatures      = TeX,
	BoldFont       = JuliaMono-Bold,
	ItalicFont     = JuliaMono-MediumItalic,
	BoldItalicFont = JuliaMono-BoldItalic,
	SizeFeatures   = {Size=10},
]{JuliaMono-Regular}

%%% Titles and such.

\title{\mytitle}
\author{\myauthors}
\date{2022/12/02}

%%% Commands.

\NewDocumentCommand\code{m}{\texttt{#1}}
\NewDocumentCommand\coderubric{m}{\paragraph{\code{#1}}}

\NewDocumentCommand\zeffield{mmmmm}{%
	\vspace{1em}
	\noindent
	\begin{minipage}{\textwidth}
		\begin{tabularx}{\linewidth}{>{\bfseries}rX}
			name:        & \code{#1} \\
			size:        & \code{(#2)} \\
			type:        & \code{#3} \\
			validators:  & \code{\{ #4 \}} \\
			description: & #5
		\end{tabularx}
	\end{minipage}
}

%%% Generate archivable PDF/A file

\begin{filecontents*}[overwrite]{\jobname.xmpdata}
\Title{\mytitle}
\Author{\myauthors}
\Language{en-GB}
\Subject{\mysubject}
\Keywords{\mykeywords}
\end{filecontents*}

% Needed for pdfx + lualatex compatibility.

\usepackage{luatex85}

\RequirePackage[a-2b,mathxmp]{pdfx}[2021/12/31]
\RequirePackage{url}
